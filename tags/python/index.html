<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Python | KEEP IT REAL</title>
<meta name="keywords" content="">
<meta name="description" content="Records.">
<meta name="author" content="why">
<link rel="canonical" href="https://hy4real.github.io/tags/python/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.a090830a421002426baafbd314e38f149d77b4c48a12ee9312700d770b27fb26.css" integrity="sha256-oJCDCkIQAkJrqvvTFOOPFJ13tMSKEu6TEnANdwsn&#43;yY=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://hy4real.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://hy4real.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://hy4real.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://hy4real.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://hy4real.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://hy4real.github.io/tags/python/index.xml" title="rss">
<link rel="alternate" hreflang="zh" href="https://hy4real.github.io/tags/python/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://hy4real.github.io/tags/python/">
  <meta property="og:site_name" content="KEEP IT REAL">
  <meta property="og:title" content="Python">
  <meta property="og:description" content="Records.">
  <meta property="og:locale" content="zh">
  <meta property="og:type" content="website">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Python">
<meta name="twitter:description" content="Records.">

</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://hy4real.github.io/" accesskey="h" title="KEEP IT REAL (Alt + H)">KEEP IT REAL</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://hy4real.github.io/" title="首页">
                    <span>首页</span>
                </a>
            </li>
            <li>
                <a href="https://hy4real.github.io/archives" title="归档">
                    <span>归档</span>
                </a>
            </li>
            <li>
                <a href="https://hy4real.github.io/search" title="搜索">
                    <span>搜索</span>
                </a>
            </li>
            <li>
                <a href="https://hy4real.github.io/tags" title="标签">
                    <span>标签</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="https://hy4real.github.io/">主页</a>&nbsp;»&nbsp;<a href="https://hy4real.github.io/tags/">Tags</a></div>
  <h1>
    Python
    <a href="/tags/python/index.xml" title="RSS" aria-label="RSS">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round" height="23">
        <path d="M4 11a9 9 0 0 1 9 9" />
        <path d="M4 4a16 16 0 0 1 16 16" />
        <circle cx="5" cy="19" r="1" />
      </svg>
    </a>
  </h1>
</header>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">深度学习入门 Day 3
    </h2>
  </header>
  <div class="entry-content">
    <p>今日在进行 CIFAR-10 数据集的分类实验，使用 PyTorch 框架进行实验。 一共做了两个版本的模板，第一版的准确率是 67% 左右，第二版的准确率到了 83.43%。
第一版 一、随机种子固定（可复现性） seed = 42 random.seed(seed) np.random.seed(seed) torch.manual_seed(seed) # ...（更多CUDA种子设置） torch.backends.cudnn.deterministic = True 作用：确保每次运行结果完全一致。
原理：随机数生成器（数据打乱、权重初始化、Dropout等）都从固定起点开始。
注意：benchmark=False会牺牲一点速度换取确定性。
二、设备配置（GPU加速） device = torch.device(&#34;cuda&#34; if torch.cuda.is_available() else &#34;cpu&#34;) 作用：自动检测并使用GPU，否则用CPU。
效果：GPU可将训练速度提升10-50倍。
三、数据加载与预处理（核心部分） 1. 数据增强（仅训练集） transform_train = transforms.Compose([ transforms.RandomHorizontalFlip(), # 50%概率水平翻转（增强泛化） transforms.RandomCrop(32, padding=4), # 四周填充4像素后随机裁剪回32×32 transforms.ToTensor(), # 转为0-1的Tensor [C,H,W] transforms.Normalize((0.4914, 0.4822, 0.4465), # 每个通道的均值 (0.2471, 0.2435, 0.2616)) # 每个通道的标准差 ]) CIFAR-10均值/标准差：这些是数据集统计值，标准化后数据分布接近标准正态分布，加速收敛。
2. 测试集转换（无增强） transform_test = transforms.Compose([ transforms.ToTensor(), transforms.Normalize(...) # 必须与训练集同分布 ]) 3. DataLoader train_loader = DataLoader(train_set, batch_size=128, shuffle=True, num_workers=0) batch_size=128：每次喂给模型128张图片 shuffle=True：训练集每轮打乱顺序 num_workers=0：数据加载进程数（0表示主进程加载，简单项目够用） 四、模型架构详解（5层CNN） 特征提取器 self.features 这里的张量格式遵循 PyTorch 的约定：[B, C, H, W]，其中：
B : Batch Size，批量处理的图片数量；
C : Channels，通道数（如RGB图像为3）；
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-11-11 00:00:00 +0000 UTC'>2025年11月11日</span>&nbsp;·&nbsp;<span>why</span></footer>
  <a class="entry-link" aria-label="post link to 深度学习入门 Day 3" href="https://hy4real.github.io/posts/deeplearningday3/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">深度学习入门 Day 2
    </h2>
  </header>
  <div class="entry-content">
    <p>相较于 Day 1，mnist_cnn.py 做了两个版本的优化。
第一版本 第一版本保持了原始代码的简洁性，仅将学习率调度从batch级别修正为epoch级别。
优化后的精简代码 def train(epoch, model, criterion, optimizer, writer): # ... [原始代码：循环前向/反向/优化] ... # ❌ 移除了 scheduler.step() # 核心修改1 if batch_idx % 100 == 0: # ... [日志记录代码] ... # ... [train函数结束] ... # main 循环部分： for ep in range(1, EPOCHS&#43;1): # ... [train/test调用] ... # ✅ 在epoch结束后调度学习率 # 核心修改2 scheduler.step() # ... [记录学习率 &amp; 打印] ... 在这个参数和修改下，测试准确率达到了99.34%。
位置 原始代码 优化后代码 意图 train()函数内 scheduler.step()在batch循环中 完全移除 避免学习率下降过快，每个batch都调整会导致训练不稳定 主循环内 无 新增scheduler.step()在epoch末尾 学习率按epoch周期平滑衰减，符合CosineAnnealingLR的设计思想 为何保持其他部分不变？ 无argparse：保持原始硬编码风格，代码更简洁，适合快速实验 无验证集：简化流程，直接5 epoch后看测试集结果（MNIST简单，过拟合风险低） 无数据增强：保持原始数据分布，最直接观察模型对干净数据的拟合能力 总结：此版本改动最小（仅2行代码移动），却修正了最关键的调度逻辑问题，是 性价比最高的优化 。
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-11-10 00:00:00 +0000 UTC'>2025年11月10日</span>&nbsp;·&nbsp;<span>why</span></footer>
  <a class="entry-link" aria-label="post link to 深度学习入门 Day 2" href="https://hy4real.github.io/posts/deeplearningday2/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">深度学习入门 Day 1
    </h2>
  </header>
  <div class="entry-content">
    <p> 一、整体概述 这是一个完整的MNIST手写数字分类项目，使用PyTorch构建了一个小型卷积神经网络(CNN)。代码实现了数据加载、模型训练、测试评估、可视化错误样本和日志记录的全流程，非常适合作为深度学习入门范例。
二、逐部分详细解析 1. 导入库 (Lines 1-7) import torch, torchvision, time, os from torch import nn from torch.utils.data import DataLoader from torchvision import datasets, transforms from torch.utils.tensorboard import SummaryWriter import random, numpy as np import matplotlib.pyplot as plt 功能：导入所有必需的工具库。
设计意图：
torch &amp; torchvision: PyTorch核心框架和计算机视觉工具 time, os: 基础系统功能（虽然代码中没直接用，但为扩展预留） SummaryWriter: 连接TensorBoard，实时可视化训练曲线 random, numpy: 用于设置随机种子，保证结果可复现 matplotlib: 绘制错误样本图，直观观察模型弱点 2. 随机种子设置 (Lines 9-16) seed = 42 random.seed(seed) np.random.seed(seed) torch.manual_seed(seed) # CPU 权重 torch.cuda.manual_seed(seed) # GPU 权重 torch.cuda.manual_seed_all(seed) # 多 GPU torch.backends.cudnn.deterministic = True # 卷积确定 torch.backends.cudnn.benchmark = False device = torch.device(&#34;cuda&#34; if torch.cuda.is_available() else &#34;cpu&#34;) print(&#34;Using&#34;, device) 功能：强制所有随机性来源产生确定性结果，并自动选择运算设备。
意图详解：
可复现性：深度学习实验依赖大量随机初始化，不设置种子的话，每次运行结果都不同，无法对比调参效果 多层保险：分别设置Python、numpy、PyTorch CPU/GPU的随机种子，确保无死角 cuDNN设置： deterministic = True: 牺牲一点速度，确保卷积等操作的算法是确定的 benchmark = False: 禁止自动选择最优算法，避免非确定性 设备选择：自动检测GPU，有则用GPU加速，无则 fallback 到CPU，提升代码兼容性 3. 超参数配置 (Lines 18-21) BATCH_SIZE = 128 EPOCHS = 5 LR = 0.1 功能：集中管理训练参数。
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-11-09 00:00:00 +0000 UTC'>2025年11月9日</span>&nbsp;·&nbsp;<span>why</span></footer>
  <a class="entry-link" aria-label="post link to 深度学习入门 Day 1" href="https://hy4real.github.io/posts/deeplearningday1/"></a>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://hy4real.github.io/">KEEP IT REAL</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
